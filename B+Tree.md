# B+Tree

---

[参考链接：B+树的插入图片演示](https://www.cnblogs.com/zh718594493/p/12208878.html)

[参考链接：MySQL索引的数据结构-B+树介绍](https://www.cnblogs.com/nickchen121/p/11152523.html)

---

## B+Tree性质

+ B+树由B树和索引顺序访问方法（ISAM，这就是MyISAM引擎最初参考的数据结构）演化而来，实际中已经没有使用B树的情况了
+ B+树是为磁盘或其他直接存储辅助设备设计的一种平衡查找时
+ B+树中，==所有记录节点都是按键值的大小顺序存放在同一层的叶子节点上==，由各叶子节点指针进行连接
+ 如下：其高度为2，每页存放4条记录，扇出（fan out）为5，所有记录都在叶子节点上，并且是顺序存放的
![B+Tree](./images/B+Tree示例.png)
+ IO次数取决于b+数的高度h，假设当前数据表的数据为N，每个磁盘块的数据项的数量是m，则有h=㏒(m+1)N，当数据量N一定的情况下，m越大，h越小；而m = 磁盘块的大小 / 数据项的大小，磁盘块的大小也就是一个数据页的大小，是固定的，如果数据项占的空间越小，数据项的数量越多，树的高度越低
+ b+树要求把真实的数据放到叶子节点而不是内层节点，一旦放到内层节点，磁盘块的数据项会大幅度下降，导致树增高,当数据项等于1时将会退化成线性表

## B+Tree的插入操作

B+树的插入必须保证插入后叶子节点中的记录依然排序，同时需要考虑插入到B+树的三种情况，每种情况都会导致不同的插入算法

![B+Tree插入算法](./images/1007094-20190715183222522-74104570.png)

1. 如下图这颗B+树，若用户插入28这个值，发现当前叶子页leafPage和IndexPage索引页都没有满，直接插入就行
![插入值28](./images/1007094-20190715183410648-1481295178.png)
![插入值28后](./images/1007094-20190715183321918-762706256.png)
